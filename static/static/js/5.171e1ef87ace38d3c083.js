webpackJsonp([5],{"9HLs":function(e,t){},Kmgh:function(e,t){},Konr:function(e,t,a){e.exports=a.p+"static/img/edit.4f9db56.svg"},LaeV:function(e,t){e.exports=function(e){var t={};function a(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/",a(a.s=112)}({0:function(e,t,a){"use strict";function i(e,t,a,i,s,n,o,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),i&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):s&&(l=r?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:e,options:c}}a.d(t,"a",function(){return i})},112:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return!e.lazy||e.loaded||e.active?a("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"el-tab-pane",attrs:{role:"tabpanel","aria-hidden":!e.active,id:"pane-"+e.paneName,"aria-labelledby":"tab-"+e.paneName}},[e._t("default")],2):e._e()};i._withStripped=!0;var s={name:"ElTabPane",componentName:"ElTabPane",props:{label:String,labelContent:Function,name:String,closable:Boolean,disabled:Boolean,lazy:Boolean},data:function(){return{index:null,loaded:!1}},computed:{isClosable:function(){return this.closable||this.$parent.closable},active:function(){var e=this.$parent.currentName===(this.name||this.index);return e&&(this.loaded=!0),e},paneName:function(){return this.name||this.index}},updated:function(){this.$parent.$emit("tab-nav-update")}},n=a(0),o=Object(n.a)(s,i,[],!1,null,null,null);o.options.__file="packages/tabs/src/tab-pane.vue";var r=o.exports;r.install=function(e){e.component(r.name,r)};t.default=r}})},R2h8:function(e,t,a){e.exports=a.p+"static/img/add.90d4e5a.svg"},UJa3:function(e,t){},XI61:function(e,t){},"Z7y/":function(e,t){},aVDU:function(e,t){},aoOI:function(e,t){},d0PZ:function(e,t,a){"use strict";t.a=function(e,t){return s.MessageBox.prompt("","自定义标签名称",{inputPlaceholder:"不超过20字符",inputErrorMessage:"不超过20字符",inputValidator:e=>{if(o(e)>20)return!1},customClass:"add-label-prompt"}).then(({value:a})=>Object(i.c)("slice/addLabel",{name:a,ids:JSON.stringify(e),caseids:JSON.stringify(t)}).then(()=>{s.Message.success("添加标签成功")}).catch(e=>(s.Message.error(e.message),Promise.reject(e))))},t.c=function(e,t,a){return s.MessageBox.alert("确定删除吗？","操作确认",{showClose:!1,showCancelButton:!0}).then(()=>Object(i.c)("slice/delLabel",{names:JSON.stringify(a),id:e,caseid:t}).then(()=>{s.Message.success("删除标签成功")}).catch(e=>(s.Message.error(e.message),Promise.reject(e))))},t.b=function(e,t,a){if(!e)return"";if(t<=0)return"";a||(a="");for(var i=0,s=0;s<e.length;s++)if(e.charCodeAt(s)>255?i+=2:i++,i>t)return e.substring(0,s)+a;return e},t.d=o;var i=a("jyVo"),s=a("zL8q"),n=(a.n(s),a("9HLs"));a.n(n);function o(e){for(var t=0,a=e.length,i=-1,s=0;s<a;s++)t+=(i=e.charCodeAt(s))>=0&&i<=128?1:2;return t}},e8x1:function(e,t){},gVMB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("jyVo"),s={props:["company","type","onTrial","trialTimes"],data(){return{alert:"",aiTypes:this.$t("slice.aiTypes"),pathologyModels:{basicProcessing:["cellseg","center","pdl1db","mutialg"],histopathology:["tagging"],cytopathology:["tct1","tct2","lct1","lct2","pdl1","ki67hot","ki67","er","pr","fish","her2","np","dna","dna_ploidy","cd30","bm"]},regs:new RegExp('^[^\\\\\\/:：*?？\\"<>|]+$'),trial:Number(this.onTrial),newTrialTimes:this.trialTimes}},methods:{trailChange(e){this.$emit("changeTrial",e)},addCompany(){if(""==this.company.name.trim())return this.alert="组织名称不能为空",setTimeout(()=>this.alert="",3e3),!1;if(!this.regs.test(this.company.name))return!1;let e=Object.assign({},this.newTrialTimes);return Object.keys(e).forEach(t=>{this.company.checkedMOdels.includes(t)||delete e[t],["tct","lct"].includes(t)&&delete e[t]}),Object.values(e).some(e=>""===e)&&this.trial?(this.$message.error("算法次数限制不能为空"),!1):this.company.isTest&&!this.company.endTime?(this.$message.error("试用时间不能为空"),!1):void("add"==this.type?(t={grp_name:this.company.name.trim(),model_lis:JSON.stringify(this.company.checkedMOdels),volume:this.company.volume,remark:this.company.remark,importable:this.company.importable,exportJson:this.company.exportJson,isTest:this.company.isTest,endTime:this.company.endTime,defaultAiThreshold:JSON.stringify(this.company.defaultAiThreshold),onTrial:this.trial,trialTimes:JSON.stringify(this.newTrialTimes)},Object(i.b)("manage/add_grp",t).then(e=>{1==e.data.status?this.$emit("close"):-1==e.data.status&&(this.alert="组织名称已存在",setTimeout(()=>this.alert="",3e3))})):"edit"==this.type&&(t={old_grp_name:this.company.oldName,new_grp_name:this.company.name.trim(),model_lis:JSON.stringify(this.company.checkedMOdels),volume:this.company.volume,remark:this.company.remark,id:this.company.id,importable:this.company.importable,exportJson:this.company.exportJson,isTest:this.company.isTest,endTime:this.company.endTime,defaultAiThreshold:JSON.stringify(this.company.defaultAiThreshold),onTrial:this.trial,trialTimes:JSON.stringify(this.newTrialTimes)},Object(i.b)("manage/alter_attr",t).then(e=>{1==e.data.status?this.$emit("close"):-1==e.data.status&&(this.alert="组织名称已存在",setTimeout(()=>this.alert="",3e3))}).catch(e=>{console.log(e)})));var t},checkAll(e){let t=e.target.checked;this.company.checkedMOdels=t?Object.keys(this.aiTypes):[]},isContain:(e,t)=>e.every(e=>t.includes(e)),selectModel(e,t){if(e)this.company.checkedMOdels.push(t);else{let e=this.company.checkedMOdels.indexOf(t);this.company.checkedMOdels.splice(e,1),this.newTrialTimes[t]=""}},checkPart(e,t){e?(this.company.checkedMOdels=this.company.checkedMOdels.concat(this.pathologyModels[t]),this.company.checkedMOdels=Array.from(new Set(this.company.checkedMOdels))):this.company.checkedMOdels=this.company.checkedMOdels.filter(e=>!this.pathologyModels[t].includes(e))},isAll(){return this.isContain(this.pathologyModels.basicProcessing,this.company.checkedMOdels)&&this.isContain(this.pathologyModels.histopathology,this.company.checkedMOdels)&&this.isContain(this.pathologyModels.cytopathology,this.company.checkedMOdels)}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal"},[a("div",{staticClass:"box"},[a("div",{staticClass:"title"},[a("span",[e._v(e._s("add"==e.type?"添加组织":"修改组织"))]),e._v(" "),a("div",{staticClass:"close",on:{click:function(t){return e.$emit("close")}}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"edit"},[a("table",[a("tr",[e._m(0),e._v(" "),a("td",{staticClass:"name",staticStyle:{"padding-bottom":"8px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.company.name,expression:"company.name"}],attrs:{type:"text",placeholder:"请输入组织名称",maxlength:"200"},domProps:{value:e.company.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCompany(t)},input:function(t){t.target.composing||e.$set(e.company,"name",t.target.value)}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.alert,expression:"alert"}]},[e._v(e._s(e.alert))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.company.name&&!e.regs.test(e.company.name),expression:"company.name && !regs.test(company.name)"}]},[e._v('组织名称不能包含下列任何字符：\\ / : * ? " '+e._s("<>")+" |")])])]),e._v(" "),a("tr",[a("td",{staticStyle:{"padding-bottom":"4px"},attrs:{align:"right"}},[e._v("导入/出.db文件")]),e._v(" "),a("td",{staticStyle:{"padding-bottom":"4px"}},[a("el-radio",{attrs:{label:0},on:{change:e.trailChange},model:{value:e.company.importable,callback:function(t){e.$set(e.company,"importable",t)},expression:"company.importable"}},[e._v("关闭")]),e._v(" "),a("el-radio",{attrs:{label:1},on:{change:e.trailChange},model:{value:e.company.importable,callback:function(t){e.$set(e.company,"importable",t)},expression:"company.importable"}},[e._v("开启")])],1)]),e._v(" "),a("tr",[a("td",{staticStyle:{"padding-bottom":"4px"},attrs:{align:"right"}},[e._v("导出json")]),e._v(" "),a("td",{staticStyle:{"padding-bottom":"4px"}},[a("el-radio",{attrs:{label:0},on:{change:e.trailChange},model:{value:e.company.exportJson,callback:function(t){e.$set(e.company,"exportJson",t)},expression:"company.exportJson"}},[e._v("关闭")]),e._v(" "),a("el-radio",{attrs:{label:1},on:{change:e.trailChange},model:{value:e.company.exportJson,callback:function(t){e.$set(e.company,"exportJson",t)},expression:"company.exportJson"}},[e._v("开启")])],1)]),e._v(" "),a("tr",[a("td",{staticStyle:{"padding-bottom":"4px"},attrs:{align:"right"}},[e._v("软件试用")]),e._v(" "),a("td",{staticStyle:{"padding-bottom":"4px"}},[a("el-radio",{attrs:{label:0},on:{change:e.trailChange},model:{value:e.company.isTest,callback:function(t){e.$set(e.company,"isTest",t)},expression:"company.isTest"}},[e._v("不试用")]),e._v(" "),a("el-radio",{attrs:{label:1},on:{change:e.trailChange},model:{value:e.company.isTest,callback:function(t){e.$set(e.company,"isTest",t)},expression:"company.isTest"}},[e._v("开启试用，截止日期")]),e._v(" "),e.company.isTest?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.company.endTime,callback:function(t){e.$set(e.company,"endTime",t)},expression:"company.endTime"}}):e._e()],1)]),e._v(" "),a("tr",[a("td",{staticStyle:{"padding-bottom":"4px"},attrs:{align:"right"}},[e._v("算法试用")]),e._v(" "),a("td",{staticStyle:{"padding-bottom":"4px"}},[a("el-radio",{attrs:{label:0},on:{change:e.trailChange},model:{value:e.trial,callback:function(t){e.trial=t},expression:"trial"}},[e._v("不试用")]),e._v(" "),a("el-radio",{attrs:{label:1},on:{change:e.trailChange},model:{value:e.trial,callback:function(t){e.trial=t},expression:"trial"}},[e._v("算法次数限制")])],1)]),e._v(" "),a("tr",[a("td",{attrs:{align:"right"}},[e._v("选择模块")]),e._v(" "),a("td",{staticStyle:{"white-space":"normal",width:"536px"}},[a("label",{staticStyle:{display:"block"}},[a("input",{attrs:{type:"checkbox",name:"",id:""},domProps:{checked:e.isAll()},on:{change:e.checkAll}}),e._v("全选\n                        ")]),e._v(" "),a("table",{staticClass:"check-group",attrs:{cellspacing:"0"}},[a("tr",[a("td",[a("label",{staticStyle:{display:"block"}},[a("input",{attrs:{type:"checkbox",name:"",id:""},domProps:{checked:e.isContain(e.pathologyModels.basicProcessing,e.company.checkedMOdels)},on:{change:function(t){return e.checkPart(t.target.checked,"basicProcessing")}}}),e._v("图像处理\n                                    ")])]),e._v(" "),a("td",[a("ul",e._l(e.pathologyModels.basicProcessing,function(t,i){return a("li",{key:i},[a("label",{staticStyle:{display:"block"}},[a("input",{attrs:{type:"checkbox",name:"",id:""},domProps:{checked:e.company.checkedMOdels.includes(t)},on:{change:function(a){return e.selectModel(a.target.checked,t)}}}),e._v(e._s(e.aiTypes[t])+"\n                                            ")])])}),0)])]),e._v(" "),a("tr",[a("td",[a("label",{staticStyle:{display:"block"}},[a("input",{attrs:{type:"checkbox",name:"",id:""},domProps:{checked:e.isContain(e.pathologyModels.histopathology,e.company.checkedMOdels)},on:{change:function(t){return e.checkPart(t.target.checked,"histopathology")}}}),e._v("科研\n                                    ")])]),e._v(" "),a("td",[a("ul",e._l(e.pathologyModels.histopathology,function(t,i){return a("li",{key:i},[a("label",{staticStyle:{display:"block"}},[a("input",{attrs:{type:"checkbox",name:"",id:""},domProps:{checked:e.company.checkedMOdels.includes(t)},on:{change:function(a){return e.selectModel(a.target.checked,t)}}}),e._v(e._s(e.aiTypes[t])+"\n                                            ")])])}),0)])]),e._v(" "),a("tr",[a("td",[a("label",{staticStyle:{display:"block"}},[a("input",{attrs:{type:"checkbox",name:"",id:""},domProps:{checked:e.isContain(e.pathologyModels.cytopathology,e.company.checkedMOdels)},on:{change:function(t){return e.checkPart(t.target.checked,"cytopathology")}}}),e._v("AI处理\n                                    ")])]),e._v(" "),a("td",[a("ul",e._l(e.pathologyModels.cytopathology,function(t,i){return a("li",{key:i},[a("label",[a("input",{attrs:{type:"checkbox",name:"",id:""},domProps:{checked:e.company.checkedMOdels.includes(t)},on:{change:function(a){return e.selectModel(a.target.checked,t)}}}),e._v(e._s(e.aiTypes[t])+"\n                                            ")]),e._v(" "),e.company.checkedMOdels.includes(t)&&e.trial?a("input",{directives:[{name:"model",rawName:"v-model",value:e.newTrialTimes[t],expression:"newTrialTimes[item]"}],staticClass:"maininput",domProps:{value:e.newTrialTimes[t]},on:{input:[function(a){a.target.composing||e.$set(e.newTrialTimes,t,a.target.value)},function(a){e.newTrialTimes[t]=e.newTrialTimes[t].replace(/[^\d]/g,"")&&parseInt(e.newTrialTimes[t].replace(/[^\d]/g,""))}]}}):e._e()])}),0)])])])])]),e._v(" "),a("tr",[a("td",{attrs:{align:"right"}},[e._v(e._s(e.$t("backstage.volume")))]),e._v(" "),a("td",{staticClass:"volume"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.company.volume,expression:"company.volume"}],staticStyle:{"padding-right":"55px"},attrs:{type:"text",placeholder:"请输入容量"},domProps:{value:e.company.volume},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCompany(t)},input:[function(t){t.target.composing||e.$set(e.company,"volume",t.target.value)},function(t){e.company.volume=e.company.volume.replace(/[^\d.]/g,"")}]}}),e._v(" "),a("span",[e._v("GB")])])]),e._v(" "),a("tr",[a("td",{attrs:{align:"right"}},[e._v("TCT默认阈值")]),e._v(" "),a("td",{staticClass:"volume"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.company.defaultAiThreshold.tct,expression:"company.defaultAiThreshold.tct"}],staticStyle:{"padding-right":"55px"},attrs:{type:"text",placeholder:"请输入TCT默认阈值"},domProps:{value:e.company.defaultAiThreshold.tct},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCompany(t)},input:function(t){t.target.composing||e.$set(e.company.defaultAiThreshold,"tct",t.target.value)}}})])]),e._v(" "),a("tr",[a("td",{attrs:{align:"right"}},[e._v("LCT默认阈值")]),e._v(" "),a("td",{staticClass:"volume"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.company.defaultAiThreshold.lct,expression:"company.defaultAiThreshold.lct"}],staticStyle:{"padding-right":"55px"},attrs:{type:"text",placeholder:"请输入LCT默认阈值"},domProps:{value:e.company.defaultAiThreshold.lct},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCompany(t)},input:function(t){t.target.composing||e.$set(e.company.defaultAiThreshold,"lct",t.target.value)}}})])]),e._v(" "),a("tr",[a("td",{attrs:{align:"right"}},[e._v("TBS+DNA默认阈值")]),e._v(" "),a("td",{staticClass:"volume"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.company.defaultAiThreshold.dna,expression:"company.defaultAiThreshold.dna"}],staticStyle:{"padding-right":"55px"},attrs:{type:"text",placeholder:"请输入TBS+DNA默认阈值"},domProps:{value:e.company.defaultAiThreshold.dna},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCompany(t)},input:function(t){t.target.composing||e.$set(e.company.defaultAiThreshold,"dna",t.target.value)}}})])]),e._v(" "),a("tr",[a("td",{attrs:{align:"right"}},[e._v("DNA倍体默认阈值")]),e._v(" "),a("td",{staticClass:"volume"},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:8}},[e._v("IOD比例")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{precision:2,step:.01,max:.99,min:.01},model:{value:e.company.defaultAiThreshold.dna_ploidy.iod_ratio,callback:function(t){e.$set(e.company.defaultAiThreshold.dna_ploidy,"iod_ratio",t)},expression:"company.defaultAiThreshold.dna_ploidy.iod_ratio"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:8}},[e._v("细胞置信度")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-input-number",{attrs:{precision:2,step:.01,max:.99,min:.01},model:{value:e.company.defaultAiThreshold.dna_ploidy.conf_thres,callback:function(t){e.$set(e.company.defaultAiThreshold.dna_ploidy,"conf_thres",t)},expression:"company.defaultAiThreshold.dna_ploidy.conf_thres"}})],1)],1)],1)],1)],1)]),e._v(" "),a("tr",[a("td",{attrs:{align:"right"}},[e._v("备注")]),e._v(" "),a("td",{staticClass:"remark"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.company.remark,expression:"company.remark"}],attrs:{name:"",id:"",cols:"30",rows:"5",placeholder:"请输入备注信息",maxlength:"100"},domProps:{value:e.company.remark},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCompany(t)},input:function(t){t.target.composing||e.$set(e.company,"remark",t.target.value)}}}),e._v(" "),a("span",[e._v("备注信息不超过100字")])])])])]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addCompany}},[e._v(e._s(e.$t("backstage.confirm")))]),e._v(" "),a("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(e.$t("backstage.cancel")))])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("td",{staticStyle:{"padding-bottom":"8px"},attrs:{align:"right"}},[t("span",{staticStyle:{color:"#FF4B4B"}},[this._v("*")]),this._v("组织名称")])}]};var o=a("VU/8")(s,n,!1,function(e){a("e8x1")},"data-v-80e5ab82",null).exports,r=a("mtWM"),l=a.n(r),c={data:()=>({modalShow:!1,userInfo:Object(i.r)(),list:[],company:""}),methods:{async getTempConfig(){const e=(await l.a.get("/aipath/api/report/config?company="+this.company)).data;0===e.code&&(this.list=e.data.templateConfig||[])},saveTempSetting(){const e=JSON.stringify(this.list);l.a.post("/aipath/api/report/config?company="+this.company,e,{headers:{"Content-Type":"application/json"},transformRequest:null}).then(e=>{if(0===e.data.code)return this.close(),this.$message.success(e.data.message),!1;this.$message.error(e.data.message)})},close(){this.modalShow=!1,this.$parent.showTemp=!1},show(e){this.modalShow=!0,this.company=e,this.getTempConfig()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.modalShow,title:"报告模板",width:"500px","before-close":e.close,"close-on-click-modal":!1,top:"20px"},on:{"update:visible":function(t){e.modalShow=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(t){return e.close()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",id:"ctlBtn"},on:{click:function(t){return e.saveTempSetting()}}},[e._v("确定")])],1)]},proxy:!0}])},[a("div",{staticClass:"temp-form"},[a("el-form",{staticStyle:{"max-width":"460px"},attrs:{"label-position":"right","label-width":"100px"}},e._l(e.list,function(t){return a("el-form-item",{key:t.templateId,attrs:{label:t.templateName}},[a("el-input",{model:{value:t.templateCode,callback:function(a){e.$set(t,"templateCode",a)},expression:"temp.templateCode"}})],1)}),1)],1)])},staticRenderFns:[]};var p=a("VU/8")(c,d,!1,function(e){a("UJa3")},null,null).exports;const m=["tct1","tct2","lct1","lct2","pdl1","ki67","ki67hot","er","pr","fish","her2","np","dna","dna_ploidy","cd30","bm"];var h=a("r3Gj"),u={name:"mark-tree",components:{},model:{prop:"groups",event:"change"},props:{showTemplateSelect:{type:Boolean,default:!0},mode:{type:String,default:"use"},templateId:{type:Number},groups:{type:Array}},data(){return{templates:[],cruTemplateId:this.templateId,defaultProps:{children:"children",label:"groupName"},pageSize:100,pageIndex:1,tmDisplay:!1,hideAddSon:!1,rightMenu:{top:0,left:0},curGroup:{},rois:{},defaultExpandIds:[]}},computed:{showEditEle(){return"edit"===this.mode||1===this.cruTemplateId}},watch:{templateId:{handler(){},immediate:!0},groups:{deep:!0,handler(e){this.$emit("change",e)}}},methods:{hasChildren:e=>e&&e.length>0,strlen(e){for(var t=0,a=0;a<e.length;a++){var i=e.charCodeAt(a);i>=1&&i<=126||65376<=i&&i<=65439?t++:t+=2}return t},showEtc(e){if(e)return this.strlen(e)<24?e:e.includes(")")?e.slice(0,4)+"..."+e.slice(-7):e.slice(0,4)+"..."+e.slice(-4)},handleNodeExpand(e){let t=!1;this.defaultExpandIds.some(a=>{if(a===e.id)return t=!0,!0}),t||this.defaultExpandIds.push(e.id)},handleNodeCollapse(e){this.defaultExpandIds.some((t,a)=>{t===e.id&&this.defaultExpandIds.splice(a,1)}),this.removeChildrenIds(e)},removeChildrenIds(e){e.children&&e.children.forEach(e=>{const t=this.defaultExpandIds.indexOf(e.id);t>0&&this.defaultExpandIds.splice(t,1),this.removeChildrenIds(e)})},selectTree(e,t){},toogleGroupRois(e){e.is_show=1==e.is_show?-1:1,Object(i.b)(`slice/markShow?companyid=${Object(i.r)().company}`,{group_id:e.id}).then(async()=>{if(this.groups=await this.getGroups(this.templateId),this.selectGroup(this.group.id),e.children){let t=null;(await this.getCurGroup(e.id)).children.map(e=>{e.id==this.group.id?t=e:e.children&&e.children.map(e=>{e.id==this.group.id&&(t=e)})}),t?this.$emit("setGroup",t):this.$emit("loadLeft","checkCurRois")}else e.id==this.group.id?this.$emit("setGroup",e):this.$emit("loadLeft","checkCurRois");this.$nextTick(()=>{this.$refs.vueTree.setCurrentKey(this.group.id)})}).catch(e=>{this.$alert(e.message)})},getTemplate(){Object(i.b)(`slice/templateList?companyid=${Object(i.r)().company}`,{}).then(({data:e})=>{this.templates=e.templates,this.templateId&&this.$emit("curTem",e.templates.find(e=>e.id==this.templateId))}).catch(()=>{this.templates=[]})},async selectChange(e){this.$emit("setTemplateId",e),this.$emit("curTem",this.templates.find(t=>t.id==e)),this.groups=await this.getGroups(e),this.setGroupChecked(),this.$emit("loadLeft")},getGroups(e){return console.trace("get_template"),(this.showTemplateSelect?Object(i.b)(`slice/selectTemplate?companyid=${Object(i.r)().company}`,{caseid:this.record.id,fileid:this.slice.id,id:e}):Object(i.c)("slice/get_template",{id:e})).then(({data:e})=>resolve(e)).catch(e=>resolve([]))},dbclick(e){this.showEditEle&&(this.reName(e),this.$refs.vueTree.setCurrentKey(e.id))},reName(e){this.$set(e,"modify",!0),this.$nextTick(()=>{this.$refs[e.id].$el.querySelector("input").focus()})},async setModifyFalse(e,t,a){let i=!1;if(t.parent.childNodes.forEach(t=>{const a=t.data;a.id!==e.id&&a.groupName===e.groupName&&(i=!0)}),i)return this.$message.error("同组标注组名称不能重复"),void a.target.focus();e.groupName||(e.groupName="默认组名称"),this.$set(e,"modify",!1),delete e.modify},getCurGroup(e){return new Promise(t=>{Object(i.b)(`slice/queryGroup?companyid=${Object(i.r)().company}`,{caseid:this.record.id,fileid:this.slice.id,group_id:e}).then(e=>t(e.data)).catch(e=>{this.$alert(e.message)})})},async rightClick(e,t,a){this.showEditEle&&(t.modify||(a.level>=3?this.hideAddSon=!0:this.hideAddSon=!1,this.tmDisplay=!0,this.rightMenu={top:e.pageY+"px",left:e.pageX+"px"},this.curGroup=t,document.onclick=(e=>{e.target!==document.getElementById("perTreeMenu")&&(this.tmDisplay=!1)})))},async colorChange(e){e.color||(this.$set(e,"color","#f00"),e.color),await this.modifyGroup(),this.$emit("setGroup",e)},modifyGroup(e){return new Promise(t=>{Object(i.b)(`slice/modifyGroup?companyid=${Object(i.r)().company}`,{caseid:this.record.id,fileid:this.slice.id,groups:JSON.stringify(this.groups)}).then(async()=>{e&&(this.groups=await this.getGroups(this.templateId)),t()}).catch(e=>{this.$alert(e.message)})})},getSon(e){return e.children?this.getSon(e.children[0]):e},setGroupChecked(){},removeExpandIds(e){if(this.defaultExpandIds.includes(e)){let t=this.defaultExpandIds.findIndex(t=>t===e);this.defaultExpandIds.splice(t,1)}},delGroup(e,t){this.$confirm("删除后该组下的所有组和标注信息将被清空且无法恢复，确定要删除吗？","操作确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{const a=e.parent,i=a.data.children||a.data,s=i.findIndex(e=>e.id===t.id);i.splice(s,1)}).catch(()=>{})},async newGroup(){let e=Date.now(),t={id:e,groupName:"默认组名称",modify:!0,color:"#FF0000",is_empty:1,is_show:1,parentId:null,children:[]};this.groups.push(t),this.$nextTick(()=>{document.getElementById(e).focus(),this.$refs.vueTree.setCurrentKey(e)})},nodeClick(e){},selectGroup(e){Object(i.b)(`slice/selectGroup?companyid=${Object(i.r)().company}`,{caseid:this.record.id,fileid:this.slice.id,group_id:e,page:this.pageIndex,per_page:this.pageSize}).then(e=>{this.rois=e.data;let t=Math.ceil(e.data.total/this.pageSize);this.pageIndex>t&&this.pageIndex>1&&this.changeIndex(t)}).catch(e=>this.$alert(e.message))},getGroupId(){return new Promise(e=>{Object(i.b)(`slice/createGroup?companyid=${Object(i.r)().company}`,{caseid:this.record.id,fileid:this.slice.id,template_id:this.cruTemplateId}).then(({data:t})=>e(t.new_group_id)).catch(e=>this.$alert(e.message))})},async addSon(){let e=Date.now(),t={id:e,groupName:"默认组名称",color:"#FF0000",is_show:1,is_empty:1,modify:!0,parentId:this.curGroup.id,children:[]};this.defaultExpandIds.includes(this.curGroup.id)||this.defaultExpandIds.push(this.curGroup.id),this.curGroup.children?this.curGroup.children.push(t):(this.curGroup.hasOwnProperty("children")&&delete this.curGroup.children,this.$set(this.curGroup,"children",[t])),setTimeout(async()=>{document.getElementById(e)&&document.getElementById(e).focus(),this.$refs.vueTree.setCurrentKey(e)},200)},changeSize(e){this.pageIndex=1,this.pageSize=e,this.selectGroup(this.group.id)},changeIndex(e){this.pageIndex=e,this.selectGroup(this.group.id)}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"component__mark-tree mark-tree"},[a("div",{staticClass:"fatherlist"},[a("div",{staticClass:"top"},[e.showTemplateSelect?a("div",{staticClass:"top-select"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.cruTemplateId,callback:function(t){e.cruTemplateId=t},expression:"cruTemplateId"}},e._l(e.templates,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),e._v(" "),e.cruTemplateId&&e.showEditEle?a("div",{staticClass:"new-group",on:{click:e.newGroup}},[e._v("+新建组")]):e._e()]),e._v(" "),a("div",{staticClass:"group-list"},[a("el-tree",{ref:"vueTree",staticClass:"tree",class:{"is-edit":e.showEditEle},attrs:{data:e.groups,props:e.defaultProps,"default-expanded-keys":e.defaultExpandIds,"expand-on-click-node":!1,"node-key":"id"},on:{"node-contextmenu":e.rightClick,"node-click":e.selectTree,"node-expand":e.handleNodeExpand,"node-collapse":e.handleNodeCollapse},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,s=t.data;return[a("div",{staticClass:"flex f-ai-c f-jc-sb tree-item",staticStyle:{"font-size":"14px",width:"100%"}},[e.showEditEle?e._e():a("span",{staticClass:"hide-button",class:{hidden:s.is_show<0},on:{click:function(t){return t.stopPropagation(),e.toogleGroupRois(s)}}}),e._v(" "),s.modify||!s.groupName?a("span",{staticStyle:{width:"166px"}},[a("el-input",{ref:s.id,attrs:{id:s.id},on:{blur:function(t){return e.setModifyFalse(s,i,t)}},model:{value:s.groupName,callback:function(t){e.$set(s,"groupName",t)},expression:"data.groupName"}})],1):a("span",{ref:s.id,staticStyle:{width:"166px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:s.groupName},on:{click:function(t){return e.nodeClick(s)},dblclick:function(t){return t.stopPropagation(),e.dbclick(s)}}},[e._v("   \n                            "+e._s(e.showEditEle||!e.hasChildren(s.children)?e.showEtc(s.groupName):e.showEtc(s.groupName+"("+s.mark_count||"0)"))+"\n                        ")]),e._v(" "),a("div",{staticClass:"edit-wrapper flex f-ai-c f-jc-sb"},[e.hasChildren(s.children)?e._e():a("el-color-picker",{attrs:{size:"mini"},on:{change:function(t){return e.colorChange(s)}},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:s.color,callback:function(t){e.$set(s,"color",t)},expression:"data.color"}}),e._v(" "),e.showEditEle?a("span",{staticClass:"delimg",on:{click:function(t){return t.stopPropagation(),e.delGroup(i,s)}}}):e._e()],1)])]}}])}),e._v(" "),e.tmDisplay?a("div",{staticClass:"tree_menu",style:{left:e.rightMenu.left,top:e.rightMenu.top},attrs:{id:"perTreeMenu"}},[a("ul",[e.hideAddSon?e._e():a("li",{on:{click:e.addSon}},[e._v("新建下级组")]),e._v(" "),a("li",{on:{click:function(t){return e.reName(e.curGroup)}}},[e._v("重命名")])])]):e._e()],1)])])},staticRenderFns:[]};var f=a("VU/8")(u,y,!1,function(e){a("aoOI"),a("Z7y/")},"data-v-1644414b",null).exports,g=a("d0PZ"),v=a("LaeV");var _={name:"mark-temp",components:{MarkTree:f,DTabPane:{mixins:[a.n(v).a],props:{name:{type:[String,Number]}}}},props:{},data:()=>({templates:[],form:{},ai_types:m,ai_types_label:h.slice.aiTypes,curId:null}),computed:{},watch:{},methods:{getLength:g.d,cutString:g.b,onTabsChange(e){if(this.form.firstAdd)delete this.form.firstAdd;else{if(this.form.new){this.$message.warning("请完成当前新增模板");const t=this.curId;return this.form.firstAdd=!0,this.curId=e,void setTimeout(()=>{this.form.firstAdd=!0,this.curId=t},200)}this.curId!==e&&(this.curId=e,this.getGroup(e))}},removeTemplate(e){const t=this.templates.findIndex(t=>t.id===e);if(this.templates[t].new)return this.templates=this.templates.filter(t=>t.id!==e),this.form={},void(this.curId=this.templates[t-1].id);this.$confirm("删除后该组下的所有组和标注信息将被清空且无法恢复，确定要删除吗？","操作确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{await Object(i.d)("slice/del_template",{id:e}),this.$message.success("删除成功"),this.form={},await this.getTemplate(),this.curId=this.templates[t-1].id})},addTemplate(){if(this.form.new)return void this.$message.warning("请完成当前新增模板");let e=Date.now();this.templates.push({id:e,name:"新建模板",new:!0}),this.form={id:e,new:!0,markGroups:[],aiName:null,firstAdd:!0},this.curId=e},async onSubmit(){if(!function e(t){let a=[];let i=!0;for(let s=0;s<t.length;s++){const n=t[s];if(a.includes(n.name))return i=!1;a.push(n.name);const o=e(n.children);if(!o)return i=!1}return i}(this.form.markGroups))return this.$message.error("标注组同级不能有相同名字的组");this.$refs.form[0].validate(async e=>{if(console.log("validate",e),e)try{let e;this.form.new?(e=(await Object(i.d)("slice/add_template",this.form)).data.template_id,this.form.new=!1):(await Object(i.d)("slice/edit_template",this.form),e=this.form.id,this.getGroup(e)),this.$message.success("提交成功"),await this.getTemplate(),this.curId=e}catch(e){this.$message.error(e.message)}})},getTemplate(){return Object(i.d)(`slice/share_templates?companyid=${Object(i.r)().company}`).then(({data:e})=>{this.templates=e.templates.filter(e=>"custom"!==e.type),"number"!=typeof this.curId&&(this.curId=this.templates[0].id),this.getGroup(this.curId)}).catch(()=>{this.templates=[]})},getGroup(e){if("0"===e)return;const t=this.templates.find(t=>t.id===e);if(!t||!0!==t.new)return Object(i.d)("slice/get_template",{id:e}).then(e=>{this.form=e.data});this.form={id:e,new:!0,markGroups:[],aiName:null}}},created(){this.getTemplate()}};var b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"component__mark-temp mark-temp"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addTemplate}},[e._v("新增")]),e._v(" "),a("el-tabs",{staticStyle:{height:"600px"},attrs:{"tab-position":"left",type:"card",value:e.curId,closable:""},on:{"tab-remove":e.removeTemplate,input:e.onTabsChange}},e._l(e.templates,function(t){return a("DTabPane",{key:t.id,attrs:{label:t.name,name:t.id}},[e.curId===t.id?[a("h2",[e._v(e._s(t.new?"新增":"编辑")+"模板")]),e._v(" "),a("h3",{staticStyle:{color:"red","margin-top":"10px"}},[e._v("※ 删除或修改组会影响用户已标注的数据，请谨慎操作。")]),e._v(" "),a("el-form",{ref:"form",refInFor:!0,staticStyle:{"margin-top":"10px"},attrs:{model:e.form,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name",rules:[{required:!0,message:"模板名称是必填项"}]}},[a("el-input",{attrs:{readonly:!e.form.new},on:{input:function(t){e.getLength(t)>20?e.form.name=e.cutString(t,20):e.form.name=t}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关联算法模块"}},[a("el-select",{attrs:{placeholder:"关联算法模块"},model:{value:e.form.aiName,callback:function(t){e.$set(e.form,"aiName",t)},expression:"form.aiName"}},[a("el-option",{attrs:{label:"不关联",value:null}}),e._v(" "),e._l(e.ai_types,function(t){return a("el-option",{key:t,attrs:{label:e.ai_types_label[t],value:t}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"允许选择多标注组"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.isMultiMark,callback:function(t){e.$set(e.form,"isMultiMark",t)},expression:"form.isMultiMark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标注组"}},[a("MarkTree",{attrs:{showTemplateSelect:!1,mode:"edit",templateId:t.id},model:{value:e.form.markGroups,callback:function(t){e.$set(e.form,"markGroups",t)},expression:"form.markGroups"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){return e.$emit("cancel")}}},[e._v("取消")])],1)],1)]:e._e()],2)}),1)],1)},staticRenderFns:[]};var k=a("VU/8")(_,b,!1,function(e){a("aVDU")},"data-v-f8a8fff0",null).exports,T=a("qlG4");const x={tct:"",lct:"",pdl1:"",ki67:"",er:"",pr:"",fish:"",ki67hot:"",her2:"",dna:""};var w={components:{model:o,addTemp:p,MarkTemp:k},data:()=>({company:[],showModel:!1,currentCompany:{oldName:"",name:"",checkedMOdels:[],volume:"",remark:"",id:"",defaultAiThreshold:{tct:.5,lct:.5,dna:.5,dna_ploidy:{iod_ratio:.25,conf_thres:.42}},importable:0,exportJson:0,isTest:0,endTime:""},companyName:"",onTrial:0,trialTimes:x,showTemp:!1}),computed:{datas(){return(this.company||[]).filter(e=>(e.name||"").toLowerCase().indexOf(this.companyName.toLowerCase())>=0)},userInfo:()=>Object(i.r)()},mounted(){this.getAllCompany()},methods:{managerMarkTemp(){const e=this.$createElement;T.a.show({slots:{default:()=>e(k,{on:{cancel:()=>T.a.close()}})}})},getAllCompany(){Object(i.r)().role&&"sa"==Object(i.r)().role?Object(i.b)("manage/get_grp").then(e=>{e.code||(this.company=e.data.sort((e,t)=>(t.create_time||"").localeCompare(e.create_time||"")))}).catch(e=>{console.log(e)}):this.$router.go(-1)},clearData(){this.currentCompany.oldName="",this.currentCompany.name="",this.currentCompany.checkedMOdels=[],this.currentCompany.volume="",this.currentCompany.remark="",this.currentCompany.id="",this.currentCompany.importable=0,this.currentCompany.exportJson=0,this.currentCompany.isTest=0,this.currentCompany.endTime="",this.currentCompany.defaultAiThreshold=this.$options.data().currentCompany.defaultAiThreshold,this.onTrial=0,this.trialTimes=x},showAdmin(e){this.$router.push({path:"/admin",query:{data:e}})},getOneCompany(e){this.clearData();var t={grp_name:e};Object(i.b)("manage/get_attr",t).then(t=>{this.currentCompany.oldName=e,this.currentCompany.name=e,this.currentCompany.checkedMOdels=JSON.parse(t.data.model_lis);const a=JSON.parse(t.data.defaultAiThreshold||"{}");a.dna_ploidy||(a.dna_ploidy={}),this.currentCompany.defaultAiThreshold=a,this.currentCompany.volume=t.data.volume,this.currentCompany.remark=t.data.remark,this.currentCompany.id=t.data.id,this.currentCompany.importable=t.data.importable,this.currentCompany.exportJson=t.data.exportJson,this.currentCompany.isTest=t.data.isTest,this.currentCompany.endTime=t.data.endTime,this.onTrial=JSON.parse(t.data.onTrial),this.trialTimes=JSON.parse(t.data.trialTimes)||x,this.showModel="edit"})},deleteCompoany(e){this.$confirm(this.$t("backstage.ifDel")+" "+e+" ?",{confirmButtonText:this.$t("backstage.confirm"),cancelButtonText:this.$t("backstage.cancel"),type:"warning"}).then(()=>{this.$confirm(this.$t("backstage.confirmdel")+" "+e+" ?",{confirmButtonText:this.$t("backstage.confirm"),cancelButtonText:this.$t("backstage.cancel"),type:"warning"}).then(()=>{Object(i.b)("manage/del_grp",{grp_name:e}).then(e=>this.getAllCompany()).catch(t=>{console.log(t),5==t.code&&this.$message({message:`不允许删除${e}组织`,type:"warning"}),6==t.code&&this.$message({message:"该组织数据正在使用，暂无法删除",type:"warning"})})}).catch(()=>{this.$message({type:"info",message:this.$t("backstage.cancelDel")})})}).catch(()=>{this.$message({type:"info",message:this.$t("backstage.cancelDel")})})},close(){this.showModel=!1,this.clearData(),this.getAllCompany()},showReportTempSetting(e){this.showTemp=!0,this.$nextTick(()=>{this.$refs.addTempRef.show(e)})}}},C={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"manage"},[i("div",{staticClass:"header"},[i("h3",[e._v(e._s(this.$t("backstage.system")))]),e._v(" "),i("router-link",{staticClass:"gohome",attrs:{to:"/index"}},[e._v(e._s(e.$t("backstage.homepage")))])],1),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"title"},[i("div",{staticClass:"fl"},[e._v("\n        组织信息\n        "),i("span",{staticClass:"num"},[e._v(e._s(e.company.length))])]),e._v(" "),i("div",{staticClass:"fr"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showModel="add",e.clearData()}}},[i("img",{attrs:{src:a("R2h8"),width:"11",alt:""}}),e._v("\n             "+e._s(e.$t("backstage.addTissue"))+"\n        ")]),e._v(" "),"sa"===e.userInfo.role?i("el-button",{attrs:{type:"primary"},on:{click:e.managerMarkTemp}},[e._v("\n          标注模板管理\n        ")]):e._e()],1)]),e._v(" "),i("el-table",{staticClass:"company",staticStyle:{width:"100%"},attrs:{data:e.datas},on:{"row-dblclick":function(t){return e.showAdmin(t.name)}}},[i("el-table-column",{attrs:{label:e.$t("backstage.organization")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{color:"#2A9FF6"}},[e._v(e._s(t.row.name))])]}}])},[i("template",{slot:"header"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.companyName,expression:"companyName",modifiers:{trim:!0}}],staticClass:"namesearch",attrs:{placeholder:"组织"},domProps:{value:e.companyName},on:{input:function(t){t.target.composing||(e.companyName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])],2),e._v(" "),i("el-table-column",{attrs:{label:e.$t("backstage.volume")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.volume)+"\n          "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.row.volume,expression:"scope.row.volume"}]},[e._v("GB")])]}}])}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"create_time",label:"创建时间"}}),e._v(" "),i("el-table-column",{attrs:{prop:"endTime",label:"截止日期"}}),e._v(" "),i("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[e._v(e._s(t.row.remark?t.row.remark:"—"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("backstage.operation"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.showReportTempSetting(t.row.company)}}},[e._v("报告模板")]),e._v("\n            \n          "),i("img",{staticStyle:{cursor:"pointer"},attrs:{src:a("Konr"),alt:""},on:{click:function(a){return a.stopPropagation(),e.getOneCompany(t.row.name)}}}),e._v("  \n          "),i("img",{staticStyle:{cursor:"pointer"},attrs:{src:a("qFMu"),alt:""},on:{click:function(a){return a.stopPropagation(),e.deleteCompoany(t.row.name)}}})]}}])})],1)],1),e._v(" "),i("transition",{attrs:{name:"fade"}},[e.showModel?i("model",{attrs:{type:e.showModel,onTrial:e.onTrial,trialTimes:e.trialTimes,company:e.currentCompany},on:{close:e.close,changeTrial:function(t){return e.onTrial=t}}}):e._e()],1),e._v(" "),e.showTemp?i("addTemp",{ref:"addTempRef"}):e._e()],1)},staticRenderFns:[]};var $=a("VU/8")(w,C,!1,function(e){a("XI61"),a("Kmgh")},"data-v-ee1e21a8",null);t.default=$.exports},qFMu:function(e,t,a){e.exports=a.p+"static/img/delete.468ae5a.svg"},qlG4:function(e,t,a){"use strict";var i=a("DoYF"),s=a("zL8q");a.n(s);const n=new i.a(s.Dialog,{visibilityEventName:"update:visible",visibilityValueName:"visible"});t.a=n}});